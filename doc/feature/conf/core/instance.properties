#################################################
## MySQL 连接配置
#################################################
# MySQL 地址（Docker 网络内使用容器名）
canal.instance.master.address=mysql:3306

# Binlog 起始位置（首次同步留空，从当前位置开始；断点续传时记录值）
canal.instance.master.journal.name=
canal.instance.master.position=
canal.instance.master.timestamp=
canal.instance.master.gtid=

# Canal 连接 MySQL 的账号（需要在 MySQL 中授权 REPLICATION SLAVE）
canal.instance.dbUsername=canal
canal.instance.dbPassword=canal
canal.instance.connectionCharset=UTF-8
canal.instance.defaultDatabaseName=pet_care_core

#################################################
## 表过滤配置（需要同步的表）
#################################################
# 格式：schema.table，多个用 | 分隔，支持正则
# 示例：pet_care_core\\..*  表示同步 pet_care_core 所有表
canal.instance.filter.regex=pet_care_core\\.tb_post|pet_care_core\\.tb_label|pet_care_core\\.tb_post_label|pet_care_core\\.tb_interaction

# 黑名单（不需要同步的表），优先级高于 filter.regex
canal.instance.filter.black.regex=

#################################################
## Kafka Topic 路由配置（动态路由）
#################################################
# 静态 topic（单 topic 模式时使用，使用 dynamicTopic 时此项忽略）
# canal.mq.topic=petcare.cdc

# 动态 topic 路由：不同表数据路由到不同 topic
# 格式：schema.table:topicName，多个用逗号分隔
canal.mq.dynamicTopic=pet_care_core\\.tb_post:petcare.post,pet_care_core\\.tb_label:petcare.label,pet_care_core\\.tb_post_label:petcare.post_label,pet_care_core\\.tb_interaction:petcare.interaction

# 分区数
canal.mq.partitionsNum=3

# 分区 hash 规则：按主键 hash 分区，保证同一主键的消息在同一分区
# 格式：schema.table:primaryKey
canal.mq.partitionHash=pet_care_core\\.tb_post:id,pet_care_core\\.tb_label:id,pet_care_core\\.tb_post_label:id,pet_care_core\\.tb_interaction:id

#################################################
## 性能优化配置
#################################################
# 并行解析（提升吞吐量）
canal.instance.parser.parallel=true
canal.instance.parser.parallelThreadSize=8
canal.instance.parser.parallelBufferSize=256

